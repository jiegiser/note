<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>动画 | 学习笔记</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="学习笔记">
    <link rel="preload" href="/note/assets/css/0.styles.c9d983ba.css" as="style"><link rel="preload" href="/note/assets/js/app.f2095998.js" as="script"><link rel="preload" href="/note/assets/js/2.03d06e60.js" as="script"><link rel="preload" href="/note/assets/js/18.54617150.js" as="script"><link rel="prefetch" href="/note/assets/js/10.9b7f60c6.js"><link rel="prefetch" href="/note/assets/js/100.70bd266c.js"><link rel="prefetch" href="/note/assets/js/101.de4cb152.js"><link rel="prefetch" href="/note/assets/js/102.ebeb4ea4.js"><link rel="prefetch" href="/note/assets/js/103.b594c36a.js"><link rel="prefetch" href="/note/assets/js/104.1bdbbca9.js"><link rel="prefetch" href="/note/assets/js/105.3e89d9b8.js"><link rel="prefetch" href="/note/assets/js/106.8701c7aa.js"><link rel="prefetch" href="/note/assets/js/107.651978c1.js"><link rel="prefetch" href="/note/assets/js/108.3488c5d4.js"><link rel="prefetch" href="/note/assets/js/109.73d34660.js"><link rel="prefetch" href="/note/assets/js/11.e1cc7eca.js"><link rel="prefetch" href="/note/assets/js/110.9f074b86.js"><link rel="prefetch" href="/note/assets/js/111.59b62bf3.js"><link rel="prefetch" href="/note/assets/js/112.940ad0c4.js"><link rel="prefetch" href="/note/assets/js/113.ef6bd937.js"><link rel="prefetch" href="/note/assets/js/114.e211dcca.js"><link rel="prefetch" href="/note/assets/js/115.3b80e738.js"><link rel="prefetch" href="/note/assets/js/116.39ddbf5b.js"><link rel="prefetch" href="/note/assets/js/117.12531bae.js"><link rel="prefetch" href="/note/assets/js/118.d02c9420.js"><link rel="prefetch" href="/note/assets/js/119.f25f2585.js"><link rel="prefetch" href="/note/assets/js/12.9c57f53a.js"><link rel="prefetch" href="/note/assets/js/120.e6ac31b2.js"><link rel="prefetch" href="/note/assets/js/121.a320acc4.js"><link rel="prefetch" href="/note/assets/js/122.ea07437a.js"><link rel="prefetch" href="/note/assets/js/123.9c8d7461.js"><link rel="prefetch" href="/note/assets/js/124.9edd7291.js"><link rel="prefetch" href="/note/assets/js/125.f9449c51.js"><link rel="prefetch" href="/note/assets/js/126.e95b068b.js"><link rel="prefetch" href="/note/assets/js/127.807de71a.js"><link rel="prefetch" href="/note/assets/js/128.143f2ff4.js"><link rel="prefetch" href="/note/assets/js/129.7e4b2923.js"><link rel="prefetch" href="/note/assets/js/13.12b503cd.js"><link rel="prefetch" href="/note/assets/js/14.5aaaaecf.js"><link rel="prefetch" href="/note/assets/js/15.9f9f860d.js"><link rel="prefetch" href="/note/assets/js/16.5641e466.js"><link rel="prefetch" href="/note/assets/js/17.33fc3c36.js"><link rel="prefetch" href="/note/assets/js/19.1b13a16b.js"><link rel="prefetch" href="/note/assets/js/20.9d425e2c.js"><link rel="prefetch" href="/note/assets/js/21.10afcac8.js"><link rel="prefetch" href="/note/assets/js/22.bd3ffbd8.js"><link rel="prefetch" href="/note/assets/js/23.3ea50f83.js"><link rel="prefetch" href="/note/assets/js/24.9cc1633c.js"><link rel="prefetch" href="/note/assets/js/25.985504c3.js"><link rel="prefetch" href="/note/assets/js/26.a1c29d22.js"><link rel="prefetch" href="/note/assets/js/27.74aa679a.js"><link rel="prefetch" href="/note/assets/js/28.cb0a67e6.js"><link rel="prefetch" href="/note/assets/js/29.a062ce13.js"><link rel="prefetch" href="/note/assets/js/3.afe03d5d.js"><link rel="prefetch" href="/note/assets/js/30.3b3d8d47.js"><link rel="prefetch" href="/note/assets/js/31.12366f4d.js"><link rel="prefetch" href="/note/assets/js/32.48670289.js"><link rel="prefetch" href="/note/assets/js/33.29a9264d.js"><link rel="prefetch" href="/note/assets/js/34.06e83610.js"><link rel="prefetch" href="/note/assets/js/35.fb3a556c.js"><link rel="prefetch" href="/note/assets/js/36.683e5351.js"><link rel="prefetch" href="/note/assets/js/37.90b7c1ab.js"><link rel="prefetch" href="/note/assets/js/38.ab9619de.js"><link rel="prefetch" href="/note/assets/js/39.3bcbc57f.js"><link rel="prefetch" href="/note/assets/js/4.8b2310ff.js"><link rel="prefetch" href="/note/assets/js/40.ba96b475.js"><link rel="prefetch" href="/note/assets/js/41.68f17aec.js"><link rel="prefetch" href="/note/assets/js/42.38ee6260.js"><link rel="prefetch" href="/note/assets/js/43.757ee2ce.js"><link rel="prefetch" href="/note/assets/js/44.311274d3.js"><link rel="prefetch" href="/note/assets/js/45.4c264142.js"><link rel="prefetch" href="/note/assets/js/46.f661c2c7.js"><link rel="prefetch" href="/note/assets/js/47.8a937ce6.js"><link rel="prefetch" href="/note/assets/js/48.f6deda39.js"><link rel="prefetch" href="/note/assets/js/49.58578dc4.js"><link rel="prefetch" href="/note/assets/js/5.20a1205f.js"><link rel="prefetch" href="/note/assets/js/50.e5e8ca29.js"><link rel="prefetch" href="/note/assets/js/51.f7f491e0.js"><link rel="prefetch" href="/note/assets/js/52.589fb012.js"><link rel="prefetch" href="/note/assets/js/53.82101639.js"><link rel="prefetch" href="/note/assets/js/54.4cfbc5c8.js"><link rel="prefetch" href="/note/assets/js/55.a33489b8.js"><link rel="prefetch" href="/note/assets/js/56.1325723e.js"><link rel="prefetch" href="/note/assets/js/57.b448e102.js"><link rel="prefetch" href="/note/assets/js/58.903d693c.js"><link rel="prefetch" href="/note/assets/js/59.1151ebec.js"><link rel="prefetch" href="/note/assets/js/6.9701b177.js"><link rel="prefetch" href="/note/assets/js/60.4020c592.js"><link rel="prefetch" href="/note/assets/js/61.e1ee07f5.js"><link rel="prefetch" href="/note/assets/js/62.947faa00.js"><link rel="prefetch" href="/note/assets/js/63.88a81c55.js"><link rel="prefetch" href="/note/assets/js/64.67d12aa7.js"><link rel="prefetch" href="/note/assets/js/65.0832574d.js"><link rel="prefetch" href="/note/assets/js/66.158b0770.js"><link rel="prefetch" href="/note/assets/js/67.e86f6e53.js"><link rel="prefetch" href="/note/assets/js/68.7e51b6f0.js"><link rel="prefetch" href="/note/assets/js/69.39220a43.js"><link rel="prefetch" href="/note/assets/js/7.7fe28524.js"><link rel="prefetch" href="/note/assets/js/70.a4299396.js"><link rel="prefetch" href="/note/assets/js/71.8139678c.js"><link rel="prefetch" href="/note/assets/js/72.49c6c5dd.js"><link rel="prefetch" href="/note/assets/js/73.145db400.js"><link rel="prefetch" href="/note/assets/js/74.5c00b588.js"><link rel="prefetch" href="/note/assets/js/75.e638f401.js"><link rel="prefetch" href="/note/assets/js/76.b588b27b.js"><link rel="prefetch" href="/note/assets/js/77.9f117860.js"><link rel="prefetch" href="/note/assets/js/78.03cff84f.js"><link rel="prefetch" href="/note/assets/js/79.d7d04cc4.js"><link rel="prefetch" href="/note/assets/js/8.9608bc02.js"><link rel="prefetch" href="/note/assets/js/80.a4b0402a.js"><link rel="prefetch" href="/note/assets/js/81.8a604dc6.js"><link rel="prefetch" href="/note/assets/js/82.c9f1d72a.js"><link rel="prefetch" href="/note/assets/js/83.3b7fc428.js"><link rel="prefetch" href="/note/assets/js/84.aa5c5c4e.js"><link rel="prefetch" href="/note/assets/js/85.8f0a8178.js"><link rel="prefetch" href="/note/assets/js/86.74075eb3.js"><link rel="prefetch" href="/note/assets/js/87.40c16cd4.js"><link rel="prefetch" href="/note/assets/js/88.331a0527.js"><link rel="prefetch" href="/note/assets/js/89.72a59094.js"><link rel="prefetch" href="/note/assets/js/9.af8652fb.js"><link rel="prefetch" href="/note/assets/js/90.402eeaf1.js"><link rel="prefetch" href="/note/assets/js/91.ff0a1d4d.js"><link rel="prefetch" href="/note/assets/js/92.aa71acc1.js"><link rel="prefetch" href="/note/assets/js/93.3fd98f12.js"><link rel="prefetch" href="/note/assets/js/94.2014686d.js"><link rel="prefetch" href="/note/assets/js/95.9eafd49c.js"><link rel="prefetch" href="/note/assets/js/96.deef7db6.js"><link rel="prefetch" href="/note/assets/js/97.e5c79f3a.js"><link rel="prefetch" href="/note/assets/js/98.ec599e70.js"><link rel="prefetch" href="/note/assets/js/99.4d4ec614.js">
    <link rel="stylesheet" href="/note/assets/css/0.styles.c9d983ba.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/note/css/css基础.html" class="nav-link">
  css 相关
</a></div><div class="nav-item"><a href="/note/react/react基础.html" class="nav-link">
  react 相关
</a></div><div class="nav-item"><a href="/note/js-patterns/代理模式.html" class="nav-link">
  js 设计模式
</a></div><div class="nav-item"><a href="/note/typescript/typescript基础语法.html" class="nav-link">
  typescript
</a></div><div class="nav-item"><a href="/note/node/基础知识.html" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/note/javascript/知识体系.html" class="nav-link">
  javascript
</a></div><div class="nav-item"><a href="/note/vue/相关笔记.html" class="nav-link">
  vue
</a></div><div class="nav-item"><a href="/note/webpack/基础知识.html" class="nav-link">
  webpack
</a></div><div class="nav-item"><a href="/note/webgis/坐标系相关.html" class="nav-link">
  webgis
</a></div><div class="nav-item"><a href="/note/http/HTTP协议基础.html" class="nav-link">
  http
</a></div><div class="nav-item"><a href="/note/Interview/forEach-forIn-forOf-map之间的区别.html" class="nav-link">
  Interview
</a></div><div class="nav-item"><a href="/note/gisAlgorithm/数据结构-矢量.html" class="nav-link">
  gis 算法
</a></div><div class="nav-item"><a href="/note/graphics/图形学基础.html" class="nav-link">
  图形学相关
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/note/css/css基础.html" class="nav-link">
  css 相关
</a></div><div class="nav-item"><a href="/note/react/react基础.html" class="nav-link">
  react 相关
</a></div><div class="nav-item"><a href="/note/js-patterns/代理模式.html" class="nav-link">
  js 设计模式
</a></div><div class="nav-item"><a href="/note/typescript/typescript基础语法.html" class="nav-link">
  typescript
</a></div><div class="nav-item"><a href="/note/node/基础知识.html" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/note/javascript/知识体系.html" class="nav-link">
  javascript
</a></div><div class="nav-item"><a href="/note/vue/相关笔记.html" class="nav-link">
  vue
</a></div><div class="nav-item"><a href="/note/webpack/基础知识.html" class="nav-link">
  webpack
</a></div><div class="nav-item"><a href="/note/webgis/坐标系相关.html" class="nav-link">
  webgis
</a></div><div class="nav-item"><a href="/note/http/HTTP协议基础.html" class="nav-link">
  http
</a></div><div class="nav-item"><a href="/note/Interview/forEach-forIn-forOf-map之间的区别.html" class="nav-link">
  Interview
</a></div><div class="nav-item"><a href="/note/gisAlgorithm/数据结构-矢量.html" class="nav-link">
  gis 算法
</a></div><div class="nav-item"><a href="/note/graphics/图形学基础.html" class="nav-link">
  图形学相关
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/note/graphics/图形学基础.html" class="sidebar-link">图形学基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/图形学基础.html#图形学基础" class="sidebar-link">图形学基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/图形学基础.html#三角形网格" class="sidebar-link">三角形网格</a></li></ul></li></ul></li><li><a href="/note/graphics/数学基础.html" class="sidebar-link">数学基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#数学基础" class="sidebar-link">数学基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#什么是向量" class="sidebar-link">什么是向量</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#三维直角坐标系" class="sidebar-link">三维直角坐标系</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#向量的表示" class="sidebar-link">向量的表示</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#向量乘以常数" class="sidebar-link">向量乘以常数</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#向量的长度" class="sidebar-link">向量的长度</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#线性组合" class="sidebar-link">线性组合</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#单位圆" class="sidebar-link">单位圆</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#弧度和角度" class="sidebar-link">弧度和角度</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#极坐标" class="sidebar-link">极坐标</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#极坐标系" class="sidebar-link">极坐标系</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#三角函数的性质" class="sidebar-link">三角函数的性质</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#旋转" class="sidebar-link">旋转</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#向量的叉乘" class="sidebar-link">向量的叉乘</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#_2d-叉乘符号的含义" class="sidebar-link">2d 叉乘符号的含义</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#_3d-向量叉乘" class="sidebar-link">3d 向量叉乘</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#_3d-叉乘的意义" class="sidebar-link">3D 叉乘的意义</a></li><li class="sidebar-sub-header"><a href="/note/graphics/数学基础.html#矩阵" class="sidebar-link">矩阵</a></li></ul></li></ul></li><li><a href="/note/graphics/webgl基础.html" class="sidebar-link">webgl基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/webgl基础.html#webgl-基础" class="sidebar-link">webGL 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/webgl基础.html#webgl-程序的结构" class="sidebar-link">webGL 程序的结构</a></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl基础.html#webgl-渲染管线" class="sidebar-link">webgl 渲染管线</a></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl基础.html#渲染过程" class="sidebar-link">渲染过程</a></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl基础.html#glsl" class="sidebar-link">GLSL</a></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl基础.html#webgl-坐标系统" class="sidebar-link">webgl 坐标系统</a></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl基础.html#webgl-机制-缓冲区对象（buffer-object）" class="sidebar-link">webgl 机制 —— 缓冲区对象（buffer object）</a></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl基础.html#移动、旋转、缩放" class="sidebar-link">移动、旋转、缩放</a></li></ul></li></ul></li><li><a href="/note/graphics/webgl高级变换与动画基础.html" class="active sidebar-link">webgl高级变换与动画基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/webgl高级变换与动画基础.html#动画" class="sidebar-link">动画</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/webgl高级变换与动画基础.html#requestanimationframe-方法" class="sidebar-link">requestAnimationFrame 方法</a></li></ul></li></ul></li><li><a href="/note/graphics/webgl颜色与纹理.html" class="sidebar-link">webgl颜色与纹理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/webgl颜色与纹理.html#颜色与纹理" class="sidebar-link">颜色与纹理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/webgl颜色与纹理.html#将非坐标数据传入顶点着色器" class="sidebar-link">将非坐标数据传入顶点着色器</a></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl颜色与纹理.html#顶点着色器与片元着色器之间通讯" class="sidebar-link">顶点着色器与片元着色器之间通讯</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl颜色与纹理.html#彩色三角形-几何形状的装配和光栅化" class="sidebar-link">彩色三角形——几何形状的装配和光栅化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/webgl颜色与纹理.html#几何形状的装配和光栅化" class="sidebar-link">几何形状的装配和光栅化</a></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl颜色与纹理.html#调用片元着色器" class="sidebar-link">调用片元着色器</a></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl颜色与纹理.html#varying-变量的作用和内插过程" class="sidebar-link">varying 变量的作用和内插过程</a></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl颜色与纹理.html#矩形表面贴上图像" class="sidebar-link">矩形表面贴上图像</a></li><li class="sidebar-sub-header"><a href="/note/graphics/webgl颜色与纹理.html#使用多幅纹理" class="sidebar-link">使用多幅纹理</a></li></ul></li></ul></li><li><a href="/note/graphics/OpenGLES着色器语言.html" class="sidebar-link">OpenGLES着色器语言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#glsl-es-概述" class="sidebar-link">GLSL ES 概述</a></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#基础" class="sidebar-link">基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#执行次序" class="sidebar-link">执行次序</a></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#注释" class="sidebar-link">注释</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#数据值类型（数值和布尔值）" class="sidebar-link">数据值类型（数值和布尔值）</a></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#变量" class="sidebar-link">变量</a></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#glsl-es-是强类型语言" class="sidebar-link">GLSL ES 是强类型语言</a></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#基本类型" class="sidebar-link">基本类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#赋值和类型转换" class="sidebar-link">赋值和类型转换</a></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#运算符" class="sidebar-link">运算符</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#矢量和矩阵" class="sidebar-link">矢量和矩阵</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#赋值和构造" class="sidebar-link">赋值和构造</a></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#矢量构造函数" class="sidebar-link">矢量构造函数</a></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#矩阵构造函数" class="sidebar-link">矩阵构造函数</a></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#访问元素" class="sidebar-link">访问元素</a></li><li class="sidebar-sub-header"><a href="/note/graphics/OpenGLES着色器语言.html#运算符-2" class="sidebar-link">运算符</a></li></ul></li></ul></li><li><a href="/note/graphics/threejs基础.html" class="sidebar-link">threejs基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/threejs基础.html#例子-渲染三角形" class="sidebar-link">例子-渲染三角形</a></li><li class="sidebar-sub-header"><a href="/note/graphics/threejs基础.html#世界坐标系到观察者坐标系" class="sidebar-link">世界坐标系到观察者坐标系</a></li><li class="sidebar-sub-header"><a href="/note/graphics/threejs基础.html#视图矩阵" class="sidebar-link">视图矩阵</a></li><li class="sidebar-sub-header"><a href="/note/graphics/threejs基础.html#投影矩阵" class="sidebar-link">投影矩阵</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/graphics/threejs基础.html#透视投影" class="sidebar-link">透视投影</a></li><li class="sidebar-sub-header"><a href="/note/graphics/threejs基础.html#正交投影" class="sidebar-link">正交投影</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="动画"><a href="#动画" class="header-anchor">#</a> 动画</h2> <p>实现一个动画也是比较简单的，就是不断擦除和重新绘制图形，并且在每次重新绘制的时候进行改变其角度就实现了动画。</p> <p>我们还是用之前的三角形进行实现一个旋转三角形，在一定的时间去重新修改旋转角度，来实现动画效果。</p> <p>在设置旋转之前，我们需要设置背景色，而不是在进行绘制之前设置背景色，记住在 webgl 中，设置好的背景色在重设之前一直有效。</p> <p>实现旋转的关键代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 旋转速度（度/秒）</span>
<span class="token keyword">var</span> <span class="token constant">ANGLE_STEP</span> <span class="token operator">=</span> <span class="token number">45.0</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// 设置顶点位置</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token function">initVertexBuffers</span><span class="token punctuation">(</span>gl<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 设置 canvas 背景色</span>
  gl<span class="token punctuation">.</span><span class="token function">clearColor</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 获取 u_ModelMatrix 变量的存储位置</span>
  <span class="token keyword">var</span> u_ModelMatrix <span class="token operator">=</span> gl<span class="token punctuation">.</span><span class="token function">getUniformLocation</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span>program<span class="token punctuation">,</span> <span class="token string">'u_ModelMatrix'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 三角形的当前旋转角度</span>
  <span class="token keyword">var</span> currentAngle <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
  <span class="token comment">// 模型矩阵 Matrix4 对象</span>
  <span class="token keyword">var</span> modelMatrix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 开始绘制三角形</span>
  <span class="token keyword">var</span> <span class="token function-variable function">tick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 更新旋转角</span>
    currentAngle <span class="token operator">=</span> <span class="token function">animate</span><span class="token punctuation">(</span>currentAngle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// gl 绘制三角形的上下文</span>
    <span class="token comment">// n 顶点个数</span>
    <span class="token comment">// currentAngle 当前的旋转角度</span>
    <span class="token comment">// modelMatrix 根据当前的旋转角度 currentAngle 计算出的旋转矩阵，存储在 matrix4 对象中</span>
    <span class="token comment">// u_ModelMatrix 顶点着色器中同名的 uniform 变量的存储位置，modelMatrix 变量江北传递至此处</span>
    <span class="token function">draw</span><span class="token punctuation">(</span>gl<span class="token punctuation">,</span> n<span class="token punctuation">,</span> currentAngle<span class="token punctuation">,</span> modelMatrix<span class="token punctuation">,</span> u_ModelMatrix<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 请求浏览器调用 trick</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>tick<span class="token punctuation">,</span> canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">initVertexBuffers</span><span class="token punctuation">(</span><span class="token parameter">gl</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> vertices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span>   <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>   <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.5</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 顶点的个数</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token comment">// 创建缓冲区对象等代码</span>
  <span class="token keyword">return</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token parameter">gl<span class="token punctuation">,</span> n<span class="token punctuation">,</span> currentAngle<span class="token punctuation">,</span> modelMatrix<span class="token punctuation">,</span> u_ModelMatrix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 设置旋转矩阵  setRotate 是计算出一个旋转矩阵，绕着 z 轴</span>
  modelMatrix<span class="token punctuation">.</span><span class="token function">setRotate</span><span class="token punctuation">(</span>currentAngle<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token comment">// 将旋转矩阵传输给顶点着色器</span>
  gl<span class="token punctuation">.</span><span class="token function">uniformMatrix4fv</span><span class="token punctuation">(</span>u_ModelMatrix<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> modelMatrix<span class="token punctuation">.</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 清除 canvas</span>
  gl<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 绘制三角形</span>
  gl<span class="token punctuation">.</span><span class="token function">drawArrays</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">TRIANGLES</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 记录上一次调用函数的时间</span>
<span class="token keyword">var</span> g_last <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">angle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 计算距离上一次调用经过多长时间</span>
  <span class="token keyword">var</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> elapsed <span class="token operator">=</span> now <span class="token operator">-</span> g_last<span class="token punctuation">;</span>
  g_last <span class="token operator">=</span> now<span class="token punctuation">;</span>
  <span class="token comment">// 根据距离上次调用的时间，更新当前旋转角度</span>
  <span class="token keyword">var</span> newAngle <span class="token operator">=</span> angle <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token constant">ANGLE_STEP</span> <span class="token operator">*</span> elapsed<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000.0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> newAngle <span class="token operator">%=</span> <span class="token number">360</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>setRotate 是封装的一些方法，</p> <p><img src="/note/assets/img/matrix4hanshu.fa98fd88.png" alt="avatar"></p> <p><img src="/note/assets/img/matrix4shengxiahanshu.933ca7ff.png" alt="avatar"></p> <h3 id="requestanimationframe-方法"><a href="#requestanimationframe-方法" class="header-anchor">#</a> requestAnimationFrame 方法</h3> <p>在实现定时渲染的时候并没有没有 setInterval 函数，因为 setInterval 函数不管浏览器标签页是否被激活，他都会反复执行里面的代码。会增加浏览器的负荷。
而 settimeout 是通过设定间隔时间来不断改变图像位置，达到动画效果。但是容易出现卡顿、抖动的现象；原因是：1、settimeout任务被放入异步队列，只有当主线程任务执行完后才会执行队列中的任务，因此实际执行时间总是比设定时间要晚；2、settimeout的固定时间间隔不一定与屏幕刷新时间相同，会引起丢帧。
requestAnimation 方法只有当标签页处于激活状态的时候才会生效，requestAnimationFrame 是新引入的方法；他主要作用是请求浏览器在将来某时刻回调函数 func 以完成重绘，我们应道在回调函数最后再次发起该请求。优势：由系统决定回调函数的执行时机。60Hz的刷新频率，那么每次刷新的间隔中会执行一次回调函数，不会引起丢帧，不会卡顿。你无法指定重复调用的间隔，回调函数会在浏览器需要网页的某个元素（第二个参数）重绘时被调用，此外还需要注意，在浏览器成功地调用了一次回调函数后，想要再次调用它，就必须要再次发送请求，因为前一次请求已经结束。</p> <p>如果想要取消其你去，需要使用 cancelAnimationFrame() 函数：</p> <p>cancelAnimationFrame(requestId) 取消由 requestAnimationFrame() 发起的请求，参数 requestId 为指定 requestAnimationFrame() 的返回值；</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新:</span> <span class="time">10/11/2020, 9:26:31 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/graphics/webgl基础.html" class="prev">
        webgl基础
      </a></span> <span class="next"><a href="/note/graphics/webgl颜色与纹理.html">
        webgl颜色与纹理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/note/assets/js/app.f2095998.js" defer></script><script src="/note/assets/js/2.03d06e60.js" defer></script><script src="/note/assets/js/18.54617150.js" defer></script>
  </body>
</html>
